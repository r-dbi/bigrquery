<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An Interface to Googles BigQuery API' • bigrquery</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An Interface to Googles BigQuery API'">
<meta name="description" content="Easily talk to Googles BigQuery' database from R.">
<meta property="og:description" content="Easily talk to Googles BigQuery' database from R.">
<meta name="robots" content="noindex">
<script defer data-domain="bigrquery.r-dbi.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bigrquery</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.6.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/01/bigrquery-1-5-0/">bigrquery 1.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/08/bigrquery-1-4-0/">bigrquery 1.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/02/bigrquery-1-1-0/">bigrquery 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2018/04/bigrquery-1-0-0/">bigrquery 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-dbi/bigrquery/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bigrquery">bigrquery<a class="anchor" aria-label="anchor" href="#bigrquery"></a>
</h1></div>
<!-- badges: start -->

<p><a href="https://app.codecov.io/gh/r-dbi/bigrquery" class="external-link"><img src="https://codecov.io/gh/r-dbi/bigrquery/graph/badge.svg" alt="Codecov test coverage"></a> <!-- badges: end --></p>
<p>The bigrquery package makes it easy to work with data stored in <a href="https://cloud.google.com/bigquery/docs" class="external-link">Google BigQuery</a> by allowing you to query BigQuery tables and retrieve metadata about your projects, datasets, tables, and jobs. The bigrquery package provides three levels of abstraction on top of BigQuery:</p>
<ul>
<li><p>The low-level API provides thin wrappers over the underlying REST API. All the low-level functions start with <code>bq_</code>, and mostly have the form <code>bq_noun_verb()</code>. This level of abstraction is most appropriate if you’re familiar with the REST API and you want do something not supported in the higher-level APIs.</p></li>
<li><p>The <a href="https://r-dbi.org" class="external-link">DBI interface</a> wraps the low-level API and makes working with BigQuery like working with any other database system. This is most convenient layer if you want to execute SQL queries in BigQuery or upload smaller amounts (i.e. &lt;100 MB) of data.</p></li>
<li><p>The <a href="https://dbplyr.tidyverse.org/" class="external-link">dplyr interface</a> lets you treat BigQuery tables as if they are in-memory data frames. This is the most convenient layer if you don’t want to write SQL, but instead want dbplyr to write it for you.</p></li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The current bigrquery release can be installed from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bigrquery"</span><span class="op">)</span></span></code></pre></div>
<p>The newest development release can be installed from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-dbi/bigrquery"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="low-level-api">Low-level API<a class="anchor" aria-label="anchor" href="#low-level-api"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bigrquery.r-dbi.org">bigrquery</a></span><span class="op">)</span></span>
<span><span class="va">billing</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bq_test_project.html">bq_test_project</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># replace this with your project ID </span></span>
<span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="st">"SELECT year, month, day, weight_pounds FROM `publicdata.samples.natality`"</span></span>
<span></span>
<span><span class="va">tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bq_query.html">bq_project_query</a></span><span class="op">(</span><span class="va">billing</span>, <span class="va">sql</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/bq_table_download.html">bq_table_download</a></span><span class="op">(</span><span class="va">tb</span>, n_max <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;     year month   day weight_pounds</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  1969     2    11          7.56</span></span>
<span><span class="co">#&gt;  2  1969    10    31          7.25</span></span>
<span><span class="co">#&gt;  3  1969     3    26          8.88</span></span>
<span><span class="co">#&gt;  4  1969     1    11          7.75</span></span>
<span><span class="co">#&gt;  5  1969    10    10          8.62</span></span>
<span><span class="co">#&gt;  6  1969     9     4          6.25</span></span>
<span><span class="co">#&gt;  7  1969    11    16          7.19</span></span>
<span><span class="co">#&gt;  8  1969     3    10          8.50</span></span>
<span><span class="co">#&gt;  9  1969    10    29          6.44</span></span>
<span><span class="co">#&gt; 10  1969     8    26          8.56</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dbi">DBI<a class="anchor" aria-label="anchor" href="#dbi"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span></span>
<span>  <span class="fu">bigrquery</span><span class="fu">::</span><span class="fu"><a href="reference/bigquery.html">bigquery</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  project <span class="op">=</span> <span class="st">"publicdata"</span>,</span>
<span>  dataset <span class="op">=</span> <span class="st">"samples"</span>,</span>
<span>  billing <span class="op">=</span> <span class="va">billing</span></span>
<span><span class="op">)</span></span>
<span><span class="va">con</span> </span>
<span><span class="co">#&gt; &lt;BigQueryConnection&gt;</span></span>
<span><span class="co">#&gt;   Dataset: publicdata.samples</span></span>
<span><span class="co">#&gt;   Billing: gargle-169921</span></span>
<span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbListTables.html" class="external-link">dbListTables</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "github_nested"   "github_timeline" "gsod"            "natality"       </span></span>
<span><span class="co">#&gt; [5] "shakespeare"     "trigrams"        "wikipedia"</span></span>
<span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">sql</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;     year month   day weight_pounds</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  1969     2    11          7.56</span></span>
<span><span class="co">#&gt;  2  1969    10    31          7.25</span></span>
<span><span class="co">#&gt;  3  1969     3    26          8.88</span></span>
<span><span class="co">#&gt;  4  1969     1    11          7.75</span></span>
<span><span class="co">#&gt;  5  1969    10    10          8.62</span></span>
<span><span class="co">#&gt;  6  1969     9     4          6.25</span></span>
<span><span class="co">#&gt;  7  1969    11    16          7.19</span></span>
<span><span class="co">#&gt;  8  1969     3    10          8.50</span></span>
<span><span class="co">#&gt;  9  1969    10    29          6.44</span></span>
<span><span class="co">#&gt; 10  1969     8    26          8.56</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dplyr">dplyr<a class="anchor" aria-label="anchor" href="#dplyr"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">natality</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"natality"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">natality</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span>, <span class="va">weight_pounds</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;     year month   day weight_pounds</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  2005    11    NA          8.88</span></span>
<span><span class="co">#&gt;  2  2005     1    NA          8.69</span></span>
<span><span class="co">#&gt;  3  2005     3    NA          7.08</span></span>
<span><span class="co">#&gt;  4  2005     7    NA          7.81</span></span>
<span><span class="co">#&gt;  5  2005     1    NA          8.56</span></span>
<span><span class="co">#&gt;  6  2005     1    NA          8.13</span></span>
<span><span class="co">#&gt;  7  2005     7    NA          8.50</span></span>
<span><span class="co">#&gt;  8  2005     9    NA          7.56</span></span>
<span><span class="co">#&gt;  9  2005     9    NA          8.14</span></span>
<span><span class="co">#&gt; 10  2005     4    NA          7.05</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="important-details">Important details<a class="anchor" aria-label="anchor" href="#important-details"></a>
</h2>
<div class="section level3">
<h3 id="bigquery-account">BigQuery account<a class="anchor" aria-label="anchor" href="#bigquery-account"></a>
</h3>
<p>To use bigrquery, you’ll need a BigQuery project. Fortunately, if you just want to play around with the BigQuery API, it’s easy to start with Google’s free <a href="https://cloud.google.com/bigquery/public-data" class="external-link">public data</a> and the <a href="https://cloud.google.com/bigquery/docs/sandbox" class="external-link">BigQuery sandbox</a>. This gives you some fun data to play with along with enough free compute (1 TB of queries &amp; 10 GB of storage per month) to learn the ropes.</p>
<p>To get started, open <a href="https://console.cloud.google.com/bigquery" class="external-link uri">https://console.cloud.google.com/bigquery</a> and create a project. Make a note of the “Project ID” as you’ll use this as the <code>billing</code> project whenever you work with free sample data; and as the <code>project</code> when you work with your own data.</p>
</div>
<div class="section level3">
<h3 id="authentication-and-authorization">Authentication and authorization<a class="anchor" aria-label="anchor" href="#authentication-and-authorization"></a>
</h3>
<p>When using bigrquery interactively, you’ll be prompted to <a href="https://cloud.google.com/bigquery/docs/authorization" class="external-link">authorize bigrquery</a> in the browser. You’ll be asked if you want to cache tokens for reuse in future sessions. For non-interactive usage, it is preferred to use a service account token, if possible. More places to learn about auth:</p>
<ul>
<li>Help for <a href="https://bigrquery.r-dbi.org/reference/bq_auth.html"><code>bigrquery::bq_auth()</code></a>.</li>
<li>
<a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html" class="external-link">How gargle gets tokens</a>.
<ul>
<li>bigrquery obtains a token with <code><a href="https://gargle.r-lib.org/reference/token_fetch.html" class="external-link">gargle::token_fetch()</a></code>, which supports a variety of token flows. This article provides full details, such as how to take advantage of Application Default Credentials or service accounts on GCE VMs.</li>
</ul>
</li>
<li>
<a href="https://gargle.r-lib.org/articles/non-interactive-auth.html" class="external-link">Non-interactive auth</a>. Explains how to set up a project when code must run without any user interaction.</li>
<li>
<a href="https://gargle.r-lib.org/articles/get-api-credentials.html" class="external-link">How to get your own API credentials</a>. Instructions for getting your own OAuth client or service account token.</li>
</ul>
<p>Note that bigrquery requests permission to modify your data; but it will never do so unless you explicitly request it (e.g. by calling <code><a href="reference/api-table.html">bq_table_delete()</a></code> or <code><a href="reference/api-table.html">bq_table_upload()</a></code>). Our <a href="https://www.tidyverse.org/google_privacy_policy" class="external-link">Privacy policy</a> provides more info.</p>
</div>
</div>
<div class="section level2">
<h2 id="useful-links">Useful links<a class="anchor" aria-label="anchor" href="#useful-links"></a>
</h2>
<ul>
<li><a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators" class="external-link">SQL reference</a></li>
<li><a href="https://cloud.google.com/bigquery/docs/reference/rest" class="external-link">API reference</a></li>
<li><a href="https://console.cloud.google.com/bigquery/" class="external-link">Query/job console</a></li>
<li><a href="https://console.cloud.google.com/" class="external-link">Billing console</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="policies">Policies<a class="anchor" aria-label="anchor" href="#policies"></a>
</h2>
<p>Please note that the ‘bigrquery’ project is released with a <a href="https://bigrquery.r-dbi.org/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
<p><a href="https://www.tidyverse.org/google_privacy_policy" class="external-link">Privacy policy</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=bigrquery" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-dbi/bigrquery/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-dbi/bigrquery/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bigrquery</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://hadley.nz" class="external-link">Hadley Wickham</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-4757-117X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6983-2759" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a> <br><small class="roles"> Copyright holder, funder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=bigrquery" class="external-link"><img src="https://www.r-pkg.org/badges/version/bigrquery" alt="CRAN Status"></a></li>
<li><a href="https://github.com/r-dbi/bigrquery/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/r-dbi/bigrquery/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
